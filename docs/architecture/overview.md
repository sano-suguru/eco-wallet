# Eco Wallet アーキテクチャ概要

## バーティカルスライスアーキテクチャ

Eco Walletは、機能単位でコードを組織化するバーティカルスライスアーキテクチャを採用しています。各機能（feature）は独立したモジュールとして実装され、明確に定義された公開APIを持ちます。

## ディレクトリ構造

```
src/
├── app/                      # Next.jsのルートレイアウトとページ
├── components/
│   └── ui/                   # 共通UIコンポーネント（shadcn/ui）
├── features/                 # 機能モジュール（17個）
├── lib/                      # 共通ライブラリ・ユーティリティ
├── services/                 # API・モックサービス
├── shared/                   # 機能間で共有されるコード
└── types/                    # グローバル型定義
```

## Feature モジュール一覧（17個）

### 1. **auth** - 認証機能

- ユーザー認証（ログイン、ログアウト、パスワードリセット）
- 認証フォームコンポーネント
- 認証フックとユーティリティ

### 2. **balance** - 残高表示機能

- 通常残高・キャンペーン残高の表示
- 残高カードコンポーネント
- 残高の状態管理

### 3. **campaigns** - キャンペーン機能

- キャンペーン情報の表示
- キャンペーンカード・バナー
- キャンペーン特典の管理

### 4. **charge** - チャージ機能

- 残高へのチャージ
- 銀行振込・カード決済対応
- チャージフロー（入力→確認→完了）

### 5. **donation** - 寄付機能

- 環境保全プロジェクトへの寄付
- 寄付フロー（選択→入力→確認→完了）
- プロジェクト情報表示

### 6. **eco-impact** - 環境貢献機能

- CO2削減量・環境貢献度の表示
- 環境インパクトの可視化
- 環境貢献サマリー

### 7. **eco-news** - エコニュース機能

- 環境関連ニュースの表示
- ニュース記事の詳細表示
- カテゴリ別フィルタリング

### 8. **invite** - 招待機能

- 友達招待機能
- QRコード・招待リンク生成
- ソーシャルシェア機能

### 9. **layout** - レイアウト共通コンポーネント

- アプリケーション共通レイアウト
- ヘッダー・フッター
- ページコンテナ

### 10. **notifications** - 通知機能

- 通知の表示・管理
- 通知バッジ
- 通知の既読管理

### 11. **payment** - 決済機能

- 店舗での決済処理
- 決済方法の選択
- 決済サマリー表示

### 12. **qrcode** - QRコード機能

- QRコード生成・表示
- QRコード読み取り
- 決済用QRコード管理

### 13. **settings** - 設定機能

- ユーザー設定管理
- プロフィール・通知・セキュリティ設定
- 環境設定（寄付比率など）

### 14. **splash** - スプラッシュ画面機能

- アプリ起動時のスプラッシュ画面
- 初期化処理の表示
- ブランドロゴ表示

### 15. **transactions** - 取引履歴・詳細表示機能

- 取引履歴の表示・フィルタリング
- 取引詳細情報
- レシート表示

### 16. **transfer** - 送金・割り勘機能

- 個人間送金
- 割り勘計算・リクエスト
- 送金履歴管理

### 17. **eco-news** - エコニュース機能

- 環境関連ニュースの配信
- ニュース詳細表示
- カテゴリ管理

## Feature モジュールの構成

各featureモジュールは以下の構造を持ちます：

```
features/[feature-name]/
├── components/       # UIコンポーネント
├── hooks/           # カスタムフック
├── store/           # 状態管理（必要な場合）
├── types/           # 型定義
├── utils/           # ユーティリティ関数
├── data/            # モックデータ（必要な場合）
├── index.ts         # 公開API
└── README.md        # 機能の説明
```

## 設計原則

### 1. **機能の独立性**

- 各featureは独立して動作可能
- 明確な責任範囲
- 最小限の依存関係

### 2. **明確な公開API**

- `index.ts`で公開するコンポーネント・型を明示
- 内部実装の隠蔽
- バージョン管理の容易さ

### 3. **再利用性**

- 共通コンポーネントは`components/ui/`に配置
- 共通ユーティリティは`shared/`に配置
- 型定義の適切な共有

### 4. **テスタビリティ**

- 各コンポーネントは独立してテスト可能
- モックデータの活用
- 副作用の最小化

## 技術スタック

- **フレームワーク**: Next.js 14 (App Router)
- **UI ライブラリ**: React 18
- **スタイリング**: Tailwind CSS
- **コンポーネント**: shadcn/ui
- **状態管理**: Redux Toolkit
- **型定義**: TypeScript
- **アイコン**: Lucide React

## 開発ガイドライン

新しい機能を追加する際は、`docs/architecture/development-guide.md`を参照してください。
